<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>CPP Primer Reading Log: Function &#8211; Chaoyu Wang</title> <meta name="description" content="Moon is a minimal, one column jekyll theme for your blog."> <meta name="keywords" content="reading log, cpp"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="https://planck35.github.io/assets/img/planck.png"> <meta name="twitter:title" content="CPP Primer Reading Log: Function"> <meta name="twitter:description" content="Personal reading log."> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="CPP Primer Reading Log: Function"> <meta property="og:description" content="Personal reading log."> <meta property="og:url" content="https://planck35.github.io/reading-log-function/"> <meta property="og:site_name" content="Chaoyu Wang"> <meta property="og:image" content="https://planck35.github.io/assets/img/planck.png"> <link rel="canonical" href="https://planck35.github.io/reading-log-function/"> <link href="https://planck35.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Chaoyu Wang Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="https://planck35.github.io/assets/css/main.css"> <!-- JS --> <script src="https://planck35.github.io/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="https://planck35.github.io/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="https://planck35.github.io/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="https://planck35.github.io/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="https://planck35.github.io/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="https://planck35.github.io/favicon.png" /> <link rel="shortcut icon" href="https://planck35.github.io/favicon.ico" /> <!-- Background Image --> <style type="text/css">body {background-image:url(https://planck35.github.io/assets/img/cmu-tartan-swatch.png); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="https://planck35.github.io/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="https://planck35.github.io/assets/img/planck.png" alt="Chaoyu Wang photo" class="author-photo"> <h4>Chaoyu Wang</h4> <p>Moon is a minimal, one column jekyll theme for your blog.</p> </li> <li><a href="https://planck35.github.io/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="http://linkedin.com/in/chaoyuw" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a> </li> <li> <a href="http://github.com/Planck35" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> <li> <a href="http://stackoverflow.com/users/9555758/planck35 from a "http://stackoverflow.com/users/9555758/planck35" link" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-stack-overflow"></i> StackOverflow</a> </li> </ul><!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="https://planck35.github.io/posts/">All Posts</a></li> <li><a href="https://planck35.github.io/tags/">All Tags</a></li> </ul> </li> <li><a href="https://planck35.github.io/projects/" >Projects</a></li> <li><a href="https://planck35.github.io/blog/" >Blog</a></li> </ul><!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>CPP Primer Reading Log: Function</h1> <h4>18 Dec 2019</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~4 minutes </p><!-- /.entry-reading-time --> <a class="btn zoombtn" href="https://planck35.github.io/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <p><code class="highlighter-rouge">initializer_list</code> can be used to pass varying number of arguments of the <strong>same</strong> type</p> <p>The use of <code class="highlighter-rouge">initialzer_list</code> is similar to <code class="highlighter-rouge">vector</code>, but its element value is constant.</p> <p>When we pass a sequence of values to an <code class="highlighter-rouge">initializer_list</code> parameter, we must enclose the sequence in curly braces:</p> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="nf">error_msg</span><span class="p">(</span><span class="n">ErrCode</span> <span class="n">e</span><span class="p">,</span> <span class="n">initializer_list</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">il</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">e</span><span class="p">.</span><span class="n">msg</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">": "</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span> <span class="o">&amp;</span><span class="n">elem</span> <span class="o">:</span> <span class="n">il</span><span class="p">)</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">elem</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span> <span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">error_msg</span><span class="p">(</span><span class="n">ErrCode</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="p">{</span><span class="s">"functionX"</span><span class="p">,</span> <span class="s">"okay"</span><span class="p">});</span></code></pre></figure> <p><strong>Ellipsis</strong> can also be used to pass a varying number of arguments. But it should be used only for types that are common to both C and C++. Objects of most cpp classes are not copied properly when using ellipsis.</p> <p><strong><em>Never Return a Reference or Pointer to a Local Object</em></strong></p> <p><strong><em>Reference Returns Are LValues</em></strong></p> <p>Calls to functions that return references are lvalues; other return types yield rvalues. Lvalues can be used on the left-hand side of an assignment.</p> <ul> <li><code class="highlighter-rouge">int (*func(int i))[10]</code> is a function that returns a pointer to array of 10 elements.</li> <li><code class="highlighter-rouge">func(int)</code> says that we can call <code class="highlighter-rouge">func</code> with an <code class="highlighter-rouge">int</code> argument.</li> <li><code class="highlighter-rouge">(*func(int))</code> says we can dereference the result of that call.</li> <li><code class="highlighter-rouge">(*func(int))[10]</code> says that dereferencing the result of a call to <code class="highlighter-rouge">func</code> yields an array of size ten.</li> <li><code class="highlighter-rouge">int (*func(int))[10]</code> says the element type in that array is <code class="highlighter-rouge">int</code>.</li> </ul> <p><strong><em>Trailing Return Type in new standard</em></strong></p> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// fcn takes an int argument and returns a pointer to an array of ten ints
</span><span class="k">auto</span> <span class="n">func</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">int</span><span class="p">(</span><span class="o">*</span><span class="p">)[</span><span class="mi">10</span><span class="p">];</span></code></pre></figure> <p>THe return type follows the parameter list and is preceded by -&gt;. We use <code class="highlighter-rouge">auto</code> where the return type ordinarily appears.</p> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="n">odd</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">};</span>
<span class="kt">int</span> <span class="n">even</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">};</span>
<span class="c1">// returns a pointer to an array of five int elements
</span><span class="k">decltype</span><span class="p">(</span><span class="n">odd</span><span class="p">)</span> <span class="o">*</span><span class="n">arrPtr</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">?</span> <span class="o">&amp;</span><span class="n">odd</span> <span class="o">:</span> <span class="o">&amp;</span><span class="n">even</span><span class="p">;</span> <span class="c1">// returns a pointer to the array
</span><span class="p">}</span></code></pre></figure> <p class="notice">It is an error for two functions to differ only in terms of their return types. If the parameter lists of two functions match but the return types differ, then the second declaration is an error.</p> <p>If we declare a name in an inner scope, <strong><em>that name hides uses of that name declared in an outer scope</em></strong>.</p> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">string</span> <span class="n">read</span><span class="p">();</span>
<span class="kt">void</span> <span class="n">print</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="p">);</span>
<span class="kt">void</span> <span class="n">print</span><span class="p">(</span><span class="kt">double</span><span class="p">);</span> <span class="c1">// overloads the print function
</span><span class="kt">void</span> <span class="nf">fooBar</span><span class="p">(</span><span class="kt">int</span> <span class="n">ival</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">bool</span> <span class="n">read</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span> <span class="c1">// new scope: hides the outer declaration of read
</span>    <span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="n">read</span><span class="p">();</span> <span class="c1">// error: read is a bool variable, not a function
</span>    <span class="c1">// bad practice: usually it's a bad idea to declare functions at local scope
</span>    <span class="kt">void</span> <span class="n">print</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span> <span class="c1">// new scope: hides previous instances of print
</span>    <span class="n">print</span><span class="p">(</span><span class="s">"Value: "</span><span class="p">);</span> <span class="c1">// error: print(const string &amp;) is hidden
</span>    <span class="n">print</span><span class="p">(</span><span class="n">ival</span><span class="p">);</span> <span class="c1">// ok: print(int) is visible
</span>    <span class="n">print</span><span class="p">(</span><span class="mf">3.14</span><span class="p">);</span> <span class="c1">// ok: calls print(int); print(double) is hidden
</span><span class="p">}</span></code></pre></figure> <p class="notice">In C++, name lookup happens before type checking.</p> <p><strong><em><code class="highlighter-rouge">inline mechanism</code></em></strong> is meant to optimize small, straight-line functions. The inline specification is only a request to the compiler. The compiler may choose to ignore this request.</p> <h2 id="pointers-to-functions">Pointers to Functions</h2> <p>A function pointer is just that - a pointer that denotes a function rather than an object.</p> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// pf points to a function returning bool that takes two const string references
</span><span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">pf</span><span class="p">)(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="p">);</span> <span class="c1">// uninitialized
// declares a function named pf that returns a bool*
</span><span class="kt">bool</span> <span class="o">*</span><span class="n">pf</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span> <span class="o">&amp;</span><span class="p">);</span></code></pre></figure> <h2 id="using-function-pointers">Using Function Pointers</h2> <p>When we use the name of a function as a value, the function is automatically converted to a pointer. For example, we can assign the address of <code class="highlighter-rouge">lengthCompare</code> to <code class="highlighter-rouge">pf</code> as follows:</p> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">pf</span> <span class="o">=</span> <span class="n">lengthCompare</span><span class="p">;</span> <span class="c1">// pf now points to the function named lengthCompare
</span><span class="n">pf</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">lengthCompare</span><span class="p">;</span> <span class="o">//</span> <span class="n">equivalent</span> <span class="n">assignment</span><span class="o">:</span> <span class="n">address</span><span class="o">-</span><span class="n">of</span> <span class="k">operator</span> <span class="n">is</span> <span class="n">optional</span></code></pre></figure> <p>Moreover, we can use a pointer to a function to call the function to which the pointer points. We can do so directly—there is no need to dereference the pointer:</p> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">bool</span> <span class="n">b1</span> <span class="o">=</span> <span class="n">pf</span><span class="p">(</span><span class="s">"hello"</span><span class="p">,</span> <span class="s">"goodbye"</span><span class="p">);</span> <span class="c1">// calls lengthCompare
</span><span class="kt">bool</span> <span class="n">b2</span> <span class="o">=</span> <span class="p">(</span><span class="o">*</span><span class="n">pf</span><span class="p">)(</span><span class="s">"hello"</span><span class="p">,</span> <span class="s">"goodbye"</span><span class="p">);</span> <span class="c1">// equivalent call
</span><span class="kt">bool</span> <span class="n">b3</span> <span class="o">=</span> <span class="n">lengthCompare</span><span class="p">(</span><span class="s">"hello"</span><span class="p">,</span> <span class="s">"goodbye"</span><span class="p">);</span> <span class="o">//</span> <span class="n">equivalent</span> <span class="n">call</span></code></pre></figure> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">f1</span><span class="p">(</span><span class="kt">int</span><span class="p">))(</span><span class="kt">int</span><span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span></code></pre></figure> <p>Reading this declaration from the inside out, we see that <code class="highlighter-rouge">f1</code> has a parameter list, so <code class="highlighter-rouge">f1</code> is a function. <code class="highlighter-rouge">f1</code> is preceded by a <code class="highlighter-rouge">*</code> so <code class="highlighter-rouge">f1</code> returns a pointer. The type of that pointer itself has a parameter list, so the pointer points to a function. That function returns an <code class="highlighter-rouge">int</code>.</p> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="https://planck35.github.io/tags/#reading log" title="Pages tagged reading log" class="tag"><span class="term">reading log</span></a><a href="https://planck35.github.io/tags/#cpp" title="Pages tagged cpp" class="tag"><span class="term">cpp</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://planck35.github.io/reading-log-function/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=https://planck35.github.io/reading-log-function/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=https://planck35.github.io/reading-log-function/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> </header> <!-- JS --> <script src="https://planck35.github.io/assets/js/jquery-1.12.0.min.js"></script> <script src="https://planck35.github.io/assets/js/jquery.dlmenu.min.js"></script> <script src="https://planck35.github.io/assets/js/jquery.goup.min.js"></script> <script src="https://planck35.github.io/assets/js/jquery.magnific-popup.min.js"></script> <script src="https://planck35.github.io/assets/js/jquery.fitvid.min.js"></script> <script src="https://planck35.github.io/assets/js/scripts.js"></script> <script type="text/javascript"> var disqus_shortname = 'taylantatli'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
